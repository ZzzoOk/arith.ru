(()=>{"use strict";var e={2554:function(e,t,r){var s=r(5893),n=r(7294),a=r(745),l=r(1722),i=r(3296),o=r(430),c=r(9511);let d=(0,c.oM)({name:"users",initialState:{username:"anon",isAuth:!1},reducers:{userSignedIn(e,t){e.username=t.payload,e.isAuth=!0},userSignedOut(e){localStorage.clear()}}}),{userSignedIn:h,userSignedOut:u}=d.actions,m=d.reducer,x=async(e,t,r)=>{await o.Z.post("https://arith-ru.onrender.com/signup",{username:e,email:t,password:r}).then(e=>{alert(e.data.message)}).catch(e=>{alert(e.response.data.message)})},j=async e=>{await o.Z.post("https://arith-ru.onrender.com/reset",{email:e}).then(e=>{alert(e.data.message)}).catch(e=>{alert(e.response.data.message)})},p=async e=>{await o.Z.get("https://arith-ru.onrender.com/get",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},params:{questionCount:e}}).then(t=>{localStorage.setItem("results"+e,JSON.stringify(t.data))}).catch(e=>{})},g=async(e,t,r)=>{await o.Z.post("https://arith-ru.onrender.com/set",{date:e,result:t,questionCount:r},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).catch(e=>{})},v=async e=>{await o.Z.get("https://arith-ru.onrender.com/leaders",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},params:{questionCount:e}}).then(t=>{localStorage.setItem("leaderboard"+e,JSON.stringify({leaders:t.data,date:new Date}))}).catch(e=>{})},f=e=>{let t=(0,l.v9)(e=>e.user.username);if(!e.leaders)return null;let r={hour:"numeric",minute:"numeric",second:"numeric",year:"numeric",month:"numeric",day:"numeric"};return e.leaders.map(e=>(0,s.jsxs)("tr",{className:e.username==t?"currentUser-hiaB_9":null,children:[(0,s.jsx)("td",{children:e.username}),(0,s.jsx)("td",{children:new Intl.DateTimeFormat("default",r).format(new Date(e.date))}),(0,s.jsx)("td",{children:e.result})]}))},b=()=>{var e,t;let[r,a]=(0,n.useState)(null!=(e=localStorage.getItem("questionCount"))?e:50),l=null!=(t=JSON.parse(localStorage.getItem("leaderboard"+r)))?t:[],i=e=>{e>0&&e<101&&a(e)};return(0,n.useEffect)(()=>{(l.length<1||new Date-new Date(l.date)>3e5)&&v(r)}),(0,s.jsx)("main",{children:(0,s.jsxs)("table",{id:"leaderboard-Y9vhMq",children:[(0,s.jsxs)("caption",{children:[(0,s.jsx)("h2",{children:"Leaderboard"}),(0,s.jsxs)("h3",{children:["Questions: ",r]}),(0,s.jsx)("span",{className:"button",onClick:()=>i(r-1),children:"Prev"}),"|",(0,s.jsx)("span",{className:"button",onClick:()=>i(+r+1),children:"Next"})]}),(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Username"}),(0,s.jsx)("th",{children:"Date"}),(0,s.jsx)("th",{children:"Result (sec)"})]})}),(0,s.jsx)("tbody",{children:(0,s.jsx)(f,{leaders:l.leaders})})]})})};var y=r(3253),S=r.n(y);let w=()=>{var e,t;let r,[a,l]=(0,n.useState)("1 + 1"),[i,o]=(0,n.useState)(0),[c,d]=(0,n.useState)(),[h,u]=(0,n.useState)(!1),[m,x]=(0,n.useState)(),j=null!=(e=localStorage.getItem("questionCount"))?e:50,p=null!=(t=JSON.parse(localStorage.getItem("results"+j)))?t:[],v=()=>Math.floor(9*Math.random())+1,f=e=>{var t,s;r+=null!=(s=null==(t=e.target)?void 0:t.innerText)?s:e;let n=(()=>{let[e,t]=a.split("+");return+e+ +t+""})();n.startsWith(r)&&n==r?(()=>{if(i==j){let e=new Date,t={date:e,result:(e-c)/1e3};p.push(t),localStorage.setItem("results"+j,JSON.stringify(p)),u(!0),g(t.date,t.result,j),b();return}c||d(new Date),r="";let e=v(),t=v();l("".concat(e," + ").concat(t)),o(i+1)})():(!n.startsWith(r)||r.length>=n.length)&&(r="",x("incorrect-JmnDRb"),setTimeout(()=>{x()},250))},b=()=>{r="",d(),l("1 + 1"),o(0)},y=e=>{isFinite(e.key)&&32!=e.keyCode&&f(e.key),35==e.keyCode&&b()};return(0,n.useEffect)(()=>(r="",document.addEventListener("keydown",y),()=>{document.removeEventListener("keydown",y)})),(0,s.jsxs)("main",{id:"main-rBiqHI",children:[(0,s.jsxs)("table",{children:[(0,s.jsx)("caption",{id:"question-I296mO",className:m,onClick:b,children:a}),(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("span",{className:"button",onClick:f,children:"7"})}),(0,s.jsx)("td",{children:(0,s.jsx)("span",{className:"button",onClick:f,children:"8"})}),(0,s.jsx)("td",{children:(0,s.jsx)("span",{className:"button",onClick:f,children:"9"})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("span",{className:"button",onClick:f,children:"4"})}),(0,s.jsx)("td",{children:(0,s.jsx)("span",{className:"button",onClick:f,children:"5"})}),(0,s.jsx)("td",{children:(0,s.jsx)("span",{className:"button",onClick:f,children:"6"})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("span",{className:"button",onClick:f,children:"1"})}),(0,s.jsx)("td",{children:(0,s.jsx)("span",{className:"button",onClick:f,children:"2"})}),(0,s.jsx)("td",{children:(0,s.jsx)("span",{className:"button",onClick:f,children:"3"})})]}),(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:"3",children:(0,s.jsx)("span",{id:"btn0-L7O8k9",className:"button",onClick:f,children:"0"})})})]}),(0,s.jsx)("tfoot",{children:(0,s.jsx)("tr",{children:(0,s.jsx)("td",{id:"counter-j8lj52",colSpan:"3",children:"".concat(i,"/").concat(j)})})})]}),(0,s.jsxs)(S(),{isOpen:h,style:{content:{top:"30%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"},overlay:{backgroundColor:"rgba(0, 0, 0, 0.75)"}},onRequestClose:()=>u(!1),children:[p.length>0&&(0,s.jsxs)("div",{children:["Your result: ",p[p.length-1].result," sec"]}),(()=>{if(p.length<2)return!1;let e=p[p.length-1].result;return p.every(t=>t.result>=e)})()&&(0,s.jsx)("div",{children:"It's personal best!"}),p.length>1&&(0,s.jsxs)("div",{children:["Previous: ",p[p.length-2].result]})]})]})},k={active:"active-J8M3TG"},O=()=>{let e=(0,l.v9)(e=>e.user.isAuth);return(0,s.jsx)("nav",{id:k.menu,children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:(0,s.jsx)(i.OL,{end:!0,to:"/",className:e=>{let{isActive:t}=e;return t?k.active:void 0},children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 16 16",children:[(0,s.jsx)("path",{d:"m 8 3.293 l 6 6 V 13.5 a 1.5 1.5 0 0 1 -1.5 1.5 h -9 A 1.5 1.5 0 0 1 2 13.5 V 9.293 l 6 -6 z"}),(0,s.jsx)("path",{d:"M7.293 1.5a1 1 0 0 1 1.414 0l6.647 6.646a.5.5 0 0 1-.708.708L8 2.207 1.354 8.854a.5.5 0 1 1-.708-.708L7.293 1.5z"})]})})}),(0,s.jsx)("li",{children:(0,s.jsx)(i.OL,{to:"/leaderboard",className:e=>{let{isActive:t}=e;return t?k.active:void 0},children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 16 16",children:(0,s.jsx)("path",{d:"m 1 10 h 4 v 5 H 1 v -5 z M 6 1 h 4 v 14 H 6 V 1 z m 5 5 h 4 v 9 h -4 V 6 z"})})})}),(0,s.jsx)("li",{children:(0,s.jsx)(i.OL,{to:e?"/profile":"/signin",className:e=>{let{isActive:t}=e;return t?k.active:void 0},children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 16 16",children:[(0,s.jsx)("path",{d:"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"}),(0,s.jsx)("path",{d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"})]})})})]})})};var N=r(9009),C=r(9293),I=r(4195),A=r(3023),L=r(4873),M=r(5788),_=r(3657),z=r(1078);let D=e=>(0,s.jsx)("input",(0,z._)({onChange:t=>e.setValue(t.target.value)},e)),E={},V=()=>{var e;let[t,r]=(0,n.useState)(null!=(e=localStorage.getItem("questionCount"))?e:50),a=JSON.parse(localStorage.getItem("results"+t)),o=(0,l.I0)(),c=(0,i.s0)(),d=e=>"auto"===e?null:new Intl.DateTimeFormat("default",{hour:"numeric",minute:"numeric",second:"numeric",year:"numeric",month:"numeric",day:"numeric"}).format(new Date(e));return(0,n.useEffect)(()=>{localStorage.getItem("results"+t)&&"[]"!=localStorage.getItem("results"+t)||p(t)}),(0,s.jsxs)("main",{id:E.main,children:[(0,s.jsx)("h2",{children:e=>e.user.username}),(0,s.jsx)("label",{htmlFor:"count",children:(0,s.jsx)("h3",{children:"Questions:"})}),(0,s.jsx)(D,{type:"number",name:"count",value:t,setValue:r,onInput:e=>{let t=e.target.value;t=(t=t<1?1:t)>100?100:t,localStorage.setItem("questionCount",t)},min:"1",max:"100"}),(0,s.jsx)(N.h,{height:400,children:(0,s.jsxs)(C.w,{data:a,margin:{top:20,right:20,bottom:20,left:0},children:[(0,s.jsx)(I.q,{vertical:!1}),(0,s.jsx)(A.K,{dataKey:"date",tickFormatter:d,dy:15}),(0,s.jsx)(L.B,{domain:["auto","auto"]}),(0,s.jsx)(M.u,{itemStyle:{color:"black",backgroundColor:"white"},labelFormatter:d,contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.8)"}}),(0,s.jsx)(_.x,{dataKey:"result"})]})}),(0,s.jsx)("span",{className:"button",onClick:()=>{o(u()),c("/signin")},children:"Log Out"})]})},q=()=>{let[e,t]=(0,n.useState)(""),[r,a]=(0,n.useState)(""),c=(0,l.I0)(),d=(0,i.s0)(),u=e=>{13==e.keyCode&&m()},m=()=>{c(async t=>{await o.Z.post("https://arith-ru.onrender.com/signin",{username:e,password:r}).then(e=>{t(h(e.data.username)),localStorage.setItem("token",e.data.token),window.location.reload()}).catch(e=>{alert("Failed to sign in")})})};return(0,n.useEffect)(()=>{localStorage.getItem("token")&&d("/profile")}),(0,s.jsxs)("main",{children:[(0,s.jsx)("h2",{children:"Sign in"}),(0,s.jsx)(D,{value:e,setValue:t,type:"text",placeholder:"Username or email",onKeyDown:u}),(0,s.jsx)(D,{value:r,setValue:a,type:"password",placeholder:"Password",onKeyDown:u}),(0,s.jsx)("span",{className:"button",onClick:m,children:"Sign in"}),(0,s.jsx)("div",{className:"links",children:(0,s.jsx)(i.OL,{to:"/signup",children:"Sign up"})}),(0,s.jsx)("div",{className:"links",children:(0,s.jsx)(i.OL,{to:"/reset",children:"Reset password"})})]})},B=()=>{let[e,t]=(0,n.useState)(""),[r,a]=(0,n.useState)(""),[l,o]=(0,n.useState)(""),c=(0,i.s0)();return(0,s.jsxs)("main",{children:[(0,s.jsx)("h2",{children:"Sign up"}),(0,s.jsx)(D,{value:e,setValue:t,type:"text",placeholder:"Username",required:!0}),(0,s.jsx)("span",{className:"errorAlert hidden",children:"Username already taken"}),(0,s.jsx)("span",{className:"errorAlert hidden",children:"Only letters and numbers are allowed"}),(0,s.jsx)(D,{value:r,setValue:a,type:"email",placeholder:"Email",required:!0}),(0,s.jsx)("span",{className:"errorAlert hidden",children:"Another account is using this email"}),(0,s.jsx)(D,{value:l,setValue:o,type:"password",placeholder:"Password",required:!0}),(0,s.jsx)("span",{className:"errorAlert hidden",children:"Use from 6 to 15 characters"}),(0,s.jsx)("div",{children:(0,s.jsx)("span",{className:"button",onClick:()=>{x(e,r,l),c("/signin")},children:"Sign up"})}),(0,s.jsx)("div",{className:"links",children:(0,s.jsx)(i.OL,{to:"/signin",children:"Sign in"})}),(0,s.jsx)("div",{className:"links",children:(0,s.jsx)(i.OL,{to:"/reset",children:"Reset password"})})]})},P=()=>{let[e,t]=(0,n.useState)("");return(0,s.jsxs)("main",{children:[(0,s.jsx)("h2",{children:"Reset password"}),(0,s.jsx)(D,{value:e,setValue:t,type:"email",placeholder:"Email"}),(0,s.jsx)("span",{className:"errorAlert hidden",children:"Email not found"}),(0,s.jsx)("span",{className:"button",onClick:j(e),children:"Reset"}),(0,s.jsx)("div",{className:"links",children:(0,s.jsx)(i.OL,{to:"/signin",children:"Sign in"})}),(0,s.jsx)("div",{className:"links",children:(0,s.jsx)(i.OL,{to:"/signup",children:"Sign up"})})]})},R=(0,c.xC)({reducer:{user:m}});a.createRoot(document.getElementById("root")).render((0,s.jsx)(n.StrictMode,{children:(0,s.jsx)(l.zt,{store:R,children:(0,s.jsx)(function(){let e=(0,l.I0)(),t=(0,l.v9)(e=>e.user.isAuth);return(0,n.useEffect)(()=>{e(async e=>{await o.Z.get("https://arith-ru.onrender.com/auth",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(t=>{e(h(t.data.username)),localStorage.setItem("token",t.data.token)}).catch(e=>{localStorage.removeItem("token")})})}),(0,s.jsxs)(i.VK,{children:[(0,s.jsx)("header",{children:(0,s.jsx)(O,{})}),(0,s.jsxs)(i.Z5,{children:[(0,s.jsx)(i.AW,{exact:!0,path:"/",element:(0,s.jsx)(w,{})}),(0,s.jsx)(i.AW,{path:"/leaderboard",element:(0,s.jsx)(b,{})}),t?(0,s.jsx)(i.AW,{path:"/profile",element:(0,s.jsx)(V,{})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.AW,{path:"/signin",element:(0,s.jsx)(q,{})}),(0,s.jsx)(i.AW,{path:"/signup",element:(0,s.jsx)(B,{})}),(0,s.jsx)(i.AW,{path:"/reset",element:(0,s.jsx)(P,{})})]})]}),(0,s.jsx)("footer",{})]})},{})})}))}},t={};function r(s){var n=t[s];if(void 0!==n)return n.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,r),a.exports}r.m=e,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(s,n){if(1&n&&(s=this(s)),8&n||"object"==typeof s&&s&&(4&n&&s.__esModule||16&n&&"function"==typeof s.then))return s;var a=Object.create(null);r.r(a);var l={};e=e||[null,t({}),t([]),t(t)];for(var i=2&n&&s;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach(e=>{l[e]=()=>s[e]});return l.default=()=>s,r.d(a,l),a}})(),r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=[];r.O=(t,s,n,a)=>{if(s){a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[s,n,a];return}for(var i=1/0,l=0;l<e.length;l++){for(var s=e[l][0],n=e[l][1],a=e[l][2],o=!0,c=0;c<s.length;c++)(!1&a||i>=a)&&Object.keys(r.O).every(e=>r.O[e](s[c]))?s.splice(c--,1):(o=!1,a<i&&(i=a));if(o){e.splice(l--,1);var d=n();void 0!==d&&(t=d)}}return t}})(),(()=>{var e={980:0};r.O.j=t=>0===e[t];var t=(t,s)=>{var n,a,l=s[0],i=s[1],o=s[2],c=0;if(l.some(t=>0!==e[t])){for(n in i)r.o(i,n)&&(r.m[n]=i[n]);if(o)var d=o(r)}for(t&&t(s);c<l.length;c++)a=l[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(d)},s=self.webpackChunkarith_ru=self.webpackChunkarith_ru||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var s=r.O(void 0,["72","361","118","143"],function(){return r(2554)});s=r.O(s)})();